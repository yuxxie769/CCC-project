{"remainingRequest":"/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/src/views/Map_new.vue?vue&type=style&index=0&id=5baf6073&lang=css","dependencies":[{"path":"/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/src/views/Map_new.vue","mtime":1651393123782},{"path":"/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/node_modules/css-loader/dist/cjs.js","mtime":1651237651218},{"path":"/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1651237651749},{"path":"/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/node_modules/postcss-loader/src/index.js","mtime":1651237651334},{"path":"/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1651237650956},{"path":"/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1651237651706}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmJvZHkgewpiYWNrZ3JvdW5kLWltYWdlOiB1cmwoIi4uLy4uL2Fzc2V0cy9iZWlqaW5ndHVwaWFuLnBuZyIpOwp9Cg=="},{"version":3,"sources":["/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/src/views/Map_new.vue"],"names":[],"mappings":";AAuJA,CAAC,CAAC,CAAC,EAAE;AACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACvD","file":"/Users/gutiancheng/Desktop/ccc_proj2/COMP90024_Project2_v_2/frontend/src/views/Map_new.vue","sourceRoot":"","sourcesContent":["<script>\nimport cityMap from \"@/js/china-main-city-map.js\";\nimport echarts from \"echarts\";\nimport axios from \"axios\";\n// import Vue from \"vue\";\n// import registerAndsetOption from '@/js/echarts-map'\n\n//中国地图（第一级地图）的ID、Name、Json数据\nvar chinaId = 100000;\nvar chinaName = \"china\";\nvar chinaJson = null;\n\n//记录父级ID、Name\nvar mapStack = [];\nvar parentId = null;\nvar parentName = null;\n\n//Echarts地图全局变量，主要是在返回上级地图的方法中会用到\nvar myChart = null;\nexport default {\nname: \"chinaMap\",\nprops: {\nmsg: String\n},\nmounted: function() {\nthis.mapChart(\"mapChart\");\n},\nmethods: {\n/**\n * 返回上一级地图\n */\nback() {\n    if (mapStack.length != 0) {\n    //如果有上级目录则执行\n    var map = mapStack.pop();\n    axios\n        .get(\"./static/json/map/\" + map.mapId + \".json\", {})\n        .then(response => {\n        const mapJson = response.data;\n        registerAndsetOption(\n            myChart,\n            map.mapId,\n            map.mapName,\n            mapJson,\n            false\n        );\n\n        //返回上一级后，父级的ID、Name随之改变\n        parentId = map.mapId;\n        parentName = map.mapName;\n        });\n    }\n},\n/**\n * Echarts地图\n */\n\nmapChart(divid) {\n    axios.get(\"./static/json/map/\" + chinaId + \".json\", {}).then(response => {\n    const mapJson = response.data;\n    chinaJson = mapJson;\n    myChart = echarts.init(document.getElementById(divid));\n    registerAndsetOption(myChart, chinaId, chinaName, mapJson, false);\n    parentId = chinaId;\n    parentName = \"china\";\n    myChart.on(\"click\", function(param) {\n        var cityId = cityMap[param.name];\n        if (cityId) {\n        //代表有下级地图\n        axios\n            .get(\"./static/json/map/\" + cityId + \".json\", {})\n            .then(response => {\n            const mapJson = response.data;\n            registerAndsetOption(\n                myChart,\n                cityId,\n                param.name,\n                mapJson,\n                true\n            );\n            });\n        } else {\n        //没有下级地图，回到一级中国地图，并将mapStack清空\n        registerAndsetOption(myChart, chinaId, chinaName, chinaJson, false);\n        mapStack = [];\n        parentId = chinaId;\n        parentName = chinaName;\n        }\n        // $.get('./asset/json/map/'+param.data.id+'.json', function (mapJson,status) {\n\n        //     registerAndsetOption(myChart,param.data.id,param.name,mapJson,true)\n\n        // }).fail(function () {\n        //     registerAndsetOption(myChart,chinaId,'china',chinaJson,false)\n        // });\n    });\n    });\n}\n}\n};\n/**\n *\n * @param {*} myChart\n * @param {*} id        省市县Id\n * @param {*} name      省市县名称\n * @param {*} mapJson   地图Json数据\n * @param {*} flag      是否往mapStack里添加parentId，parentName\n */\nfunction registerAndsetOption(myChart, id, name, mapJson, flag) {\necharts.registerMap(name, mapJson);\nmyChart.setOption({\nseries: [\n    {\n    type: \"map\",\n    map: name,\n    itemStyle: {\n        normal: {\n        areaColor: \"rgba(23, 27, 57,0)\",\n        borderColor: \"#1dc199\",\n        borderWidth: 1\n        }\n    },\n    data: initMapData(mapJson)\n    }\n]\n});\n\nif (flag) {\n//往mapStack里添加parentId，parentName,返回上一级使用\nmapStack.push({\n    mapId: parentId,\n    mapName: parentName\n});\nparentId = id;\nparentName = name;\n}\n}\n\nfunction initMapData(mapJson) {\nvar mapData = [];\nfor (var i = 0; i < mapJson.features.length; i++) {\nmapData.push({\n    name: mapJson.features[i].properties.name\n    //id:mapJson.features[i].id\n});\n}\nreturn mapData;\n}\n</script>\n\n<style>\nbody {\nbackground-image: url(\"../../assets/beijingtupian.png\");\n}\n</style>\n\n<style scoped>\n.title {\nwidth: 100%;\nheight: 10vh;\ntext-align: center;\ncolor: #fff;\nfont-size: 2em;\nline-height: 10vh;\n}\n.box {\nposition: absolute;\nwidth: 90%;\nheight: 80vh;\nleft: 5%;\ntop: 10%;\nbackground-color: rgba(24, 27, 52, 0.62);\n}\n\n.chart {\nposition: relative;\nheight: 90%;\ntop: 10%;\n}\n.backBtn {\nposition: absolute;\ntop: 0;\nbackground-color: #00c298;\nborder: 0;\ncolor: #fff;\nheight: 27px;\nfont-family: Microsoft Yahei;\nfont-size: 1em;\ncursor: pointer;\n}\n.myBlog {\nposition: absolute;\ntop: 2px;\nright: 5%;\ndisplay: block;\nborder: 2px solid #262a53;\n}\n.myBlog a {\ntext-decoration: none;\ndisplay: inline-block;\ncolor: #fff;\npadding: 5px;\nfont-size: 1em;\n}\n\n.myBlog a img {\nvertical-align: middle;\nheight: 20px;\nwidth: 20px;\nborder-radius: 50%;\nmargin: -5px 5px auto auto;\n}\n.bottom {\nposition: absolute;\nwidth: 100%;\nheight: 5%;\nline-height: 100%;\nleft: 0;\nbottom: 0%;\ntext-align: center;\n}\n</style>"]}]}